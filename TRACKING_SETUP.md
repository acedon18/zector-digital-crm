# Zector Digital Leads CRM Tracking Setup Guide

This document explains how the tracking system works in both development and production environments.

## Architecture Overview

The Zector Digital Leads CRM uses a three-tier architecture:

1. **Frontend**: React application for the CRM dashboard
2. **Backend**: Express.js API server that handles tracking data
3. **Database**: MongoDB for storing all tracking data and customer information

## Development Environment

In development, the components run as follows:

- **Frontend**: Runs locally on port 5176/5177 (Vite development server)
- **Backend**: Runs locally on port 3001 (Express server)
- **Database**: Connects to MongoDB Atlas cloud instance 

Tracking scripts generated in development will point to `http://localhost:3001/api/track` as the endpoint.

## Production Environment

In production (deployed on Vercel), the components run as follows:

- **Frontend**: Hosted on Vercel (zector-digital-crm.vercel.app)
- **Backend**: Also hosted on Vercel (zector-digital-crm.vercel.app/api/*)
- **Database**: Same MongoDB Atlas instance as development

Tracking scripts generated in production will point to `https://zector-digital-crm.vercel.app/api/track` as the endpoint.

## Vercel Environment Variables

To ensure proper functionality in production, the following environment variables must be set in your Vercel project:

1. `MONGO_URI` - Connection string for your MongoDB database (same as in `.env.production`)
2. All other API keys needed for services like data enrichment

## Tracking Script Implementation

The tracking script is generated by the `TrackingScriptGenerator` component in the CRM. The script:

1. Collects visitor data (page views, clicks, etc.)
2. Sends the data to your API endpoint
3. Your backend receives the data at `/api/track` endpoint
4. Backend processes the data and stores it in MongoDB
5. Data appears in the "Lead Tracking" section of your CRM

## Troubleshooting

If tracking data is being received by your API but not showing up in the dashboard:

1. Check that the MongoDB connection is properly set up (verify environment variables)
2. Check server logs for any database connection errors
3. Verify that the data is being properly saved to the database
4. Ensure the frontend is querying the correct API endpoints to fetch the data

## Important Notes

- Always test tracking script in a test environment before deploying to real customer sites
- The MongoDB connection string contains credentials - keep it secure and only in environment variables
- For security and privacy compliance, all tracking is GDPR compliant with anonymized IP addresses
